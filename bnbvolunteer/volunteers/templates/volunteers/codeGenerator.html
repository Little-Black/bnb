{% extends "volunteers/staff_templates/base_staff_generateVoucher.html" %}
{% load staticfiles %}

{% block specificCss %}
  <link rel="stylesheet" type="text/css" href="{% static 'volunteers/css/Bootstrap/datepicker.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'volunteers/css/codeGenerator.css' %}" />
{% endblock specificCss %}

{% block tabcontent %}
<div class="find-title">Find Vouchers</div>

<form method="post" action="">{% csrf_token %}
  <p class="add-label">Filters: </p>
  <p class="credits-label">Generated between </p>
        <input name="dateDown" class="DateInput" id="date2" type="text" format="y-m-d" value={{dateDown}}>
  <p class="credits-label">and </p>
  <input name="dateUp" class="DateInput" id="date1" type="text" format="y-m-d" value={{dateUp}}>
  <br>
  <p class="credits-label">Redemed or not: </p>
  <select name="isRedemed">
    <option {% if isRedemed == "All" %}selected{% endif %}value="All">All</option>
    <option {% if isRedemed == "Yes" %}selected{% endif %} value="Yes">Yes</option>
    <option {% if isRedemed == "No" %}selected{% endif %} value="No">No</option>
  </select>
  <br>
  <p class="credits-label">Credits between</p>
  <input name="creditsDown" class="DateInput" type="number" value={{creditsDown}}>
  <p class="credits-label">and </p>
  <input name="creditsUp" class="DateInput" type="number" value={{creditsUp}}>
  <br>
  <input type="submit"  formaction="?page=0" Value="Search" class="btn btn-default">

  <p class="credits-label">{{ num }} vouchers found. </p>
  <p class="credits-label">This is page {{ pageNum }} of {{ allPage }}. </p> 
  <br>
  <input type="submit"  formaction="?page={{ lastPage }}" Value="Last Page" class="btn btn-default">  
  <input type="submit"  formaction="?page={{ nextPage }}" Value="Next Page" class="btn btn-default">
  <br>
  <p class="credits-label">Go to page </p>
  <input name="toPage" type="text" >
  <input type="submit"  formaction="?page=?" Value="Go" class="btn btn-default">
</form>

<form action="" method="post">{% csrf_token %}
<div class="panel panel-default results">
    <div class="panel-heading">All Vouchers</div>
    <table class="table">
      <tr>
        <th>Id</th>
        <th>Code</th>
        <th>Credits</th>
        <th>Is Redemed</th>
        <th>Generate Date</th>
        <th>Selected
    <input type="checkbox" name="allSelect" id="allSelect"></input>
        </th>
    </tr>
    {% for item in query_results %}
    <tr> 
      <td>{{ item.id }}</td>
      <td>{{ item.code }}</td>
      <td>{{ item.credits }}</td>
      <td>{% if item.redemptionActivity != null %}Yes{% endif %}{% if item.redemptionActivity == null %}No{% endif %}</td>
      <td>{{ item.generateDate }}</td>
      <td><input id="checkbox-{{item.id}}"  name="{{ item.code }}" type="checkbox"></td>
    </tr>
    {% endfor %}
</table>
</div>
  <input type="submit" value="Delete Selected Vouchers" class="delete-btn btn btn-default">
  </form>
</form>


<div class="generator-title"> Generate Vouchers</div>

<form class="generator" action="{% url 'generateCodes' %}" method="post">{% csrf_token %}
<div id="dynamicInput">
    <p class="voucher-points">Voucher Points:</p><input type="text" name="myInputs1">
    <p class="how-many">Quantity of vouchers?:</p><input type="text" name="myInputs1">
</div>
<!-- <input type="button" class="btn btn-default create-more-btn" value="Create another type of voucher" onClick="addInput('dynamicInput');"> -->
<input class="btn btn-default submit-btn" type="submit" value="Generate" />
</form>
{% endblock tabcontent %}

{% block jsfiles %}
<script type="text/javascript">
  $('#allSelect').click(function(event){
    if(this.checked){
      $(':checkbox').each(function(){this.checked = true;});
      }
    else{
      $(':checkbox').each(function(){this.checked = false;});
      } 
      });
  </script>
<script src="{% static 'volunteers/js/codeGenerator.js' %}"></script>
<script src="{% static 'volunteers/js/JQuery/bootstrap-datepicker.js'%}"></script>
<script type="text/javascript">
	$(document).ready(function(){
			$('#date1').datepicker({format: "yyyy-mm-dd"});
			$('#date2').datepicker({format: "yyyy-mm-dd"});
			});
	</script>
{% endblock jsfiles %}
